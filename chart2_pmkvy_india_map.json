{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 500,
  "height": 520,
  "title": {
    "text": "PMKVY State-wise Performance",
    "subtitle": "Select year and metric to explore all states",
    "fontSize": 18,
    "fontWeight": "bold"
  },
  "params": [
    {
      "name": "yr",
      "value": "2021_22",
      "bind": {
        "input": "select",
        "options": ["2020_21", "2021_22", "2022_23", "2023_24", "2024_25"],
        "labels": ["FY 2020-21", "FY 2021-22", "FY 2022-23", "FY 2023-24", "FY 2024-25"],
        "name": "ðŸ“… Year: "
      }
    },
    {
      "name": "met",
      "value": "S",
      "bind": {
        "input": "radio",
        "options": ["S", "P"],
        "labels": ["Skilled", "Placed"],
        "name": "ðŸ“Š Metric: "
      }
    }
  ],
  "data": {
    "url": "https://cdn.jsdelivr.net/gh/udit-001/india-maps-data@8d907bc/topojson/india.json",
    "format": {"type": "topojson", "feature": "states"}
  },
  "transform": [
    {"calculate": "lower(trim(datum.properties.name))", "as": "st"},
    {
      "lookup": "st",
      "from": {
        "data": {
          "values": [
            {"st": "andhra pradesh", "S_2020_21": 66404, "P_2020_21": 7555, "S_2021_22": 13199, "P_2021_22": 7100, "S_2022_23": 5798, "S_2023_24": 32449, "S_2024_25": 35471},
            {"st": "assam", "S_2020_21": 362506, "P_2020_21": 9926, "S_2021_22": 24517, "P_2021_22": 11754, "S_2022_23": 8721, "S_2023_24": 38160, "S_2024_25": 75182},
            {"st": "bihar", "S_2020_21": 96288, "P_2020_21": 11493, "S_2021_22": 47643, "P_2021_22": 15841, "S_2022_23": 12213, "S_2023_24": 23613, "S_2024_25": 99982},
            {"st": "chhattisgarh", "S_2020_21": 16151, "P_2020_21": 1222, "S_2021_22": 9495, "P_2021_22": 568, "S_2022_23": 4356, "S_2023_24": 8385, "S_2024_25": 16452},
            {"st": "delhi", "S_2020_21": 55121, "P_2020_21": 7510, "S_2021_22": 19965, "P_2021_22": 3742, "S_2022_23": 2262, "S_2023_24": 10686, "S_2024_25": 12277},
            {"st": "goa", "S_2020_21": 1709, "P_2020_21": 17, "S_2021_22": 604, "P_2021_22": 47, "S_2022_23": 176, "S_2023_24": 183, "S_2024_25": 236},
            {"st": "gujarat", "S_2020_21": 48489, "P_2020_21": 10911, "S_2021_22": 35001, "P_2021_22": 2073, "S_2022_23": 6503, "S_2023_24": 19975, "S_2024_25": 39762},
            {"st": "haryana", "S_2020_21": 54719, "P_2020_21": 7957, "S_2021_22": 18191, "P_2021_22": 4008, "S_2022_23": 8963, "S_2023_24": 27411, "S_2024_25": 75942},
            {"st": "himachal pradesh", "S_2020_21": 15612, "P_2020_21": 2021, "S_2021_22": 8724, "P_2021_22": 1580, "S_2022_23": 3539, "S_2023_24": 5348, "S_2024_25": 19341},
            {"st": "jammu and kashmir", "S_2020_21": 58927, "P_2020_21": 7556, "S_2021_22": 21339, "P_2021_22": 2126, "S_2022_23": 7352, "S_2023_24": 28895, "S_2024_25": 85557},
            {"st": "jharkhand", "S_2020_21": 15452, "P_2020_21": 1606, "S_2021_22": 34233, "P_2021_22": 2276, "S_2022_23": 5302, "S_2023_24": 8796, "S_2024_25": 30034},
            {"st": "karnataka", "S_2020_21": 53066, "P_2020_21": 5030, "S_2021_22": 23153, "P_2021_22": 6119, "S_2022_23": 8410, "S_2023_24": 13025, "S_2024_25": 69486},
            {"st": "kerala", "S_2020_21": 31077, "P_2020_21": 1213, "S_2021_22": 12968, "P_2021_22": 3094, "S_2022_23": 5673, "S_2023_24": 8832, "S_2024_25": 10449},
            {"st": "madhya pradesh", "S_2020_21": 95403, "P_2020_21": 16010, "S_2021_22": 46659, "P_2021_22": 12649, "S_2022_23": 21345, "S_2023_24": 34884, "S_2024_25": 259871},
            {"st": "maharashtra", "S_2020_21": 148352, "P_2020_21": 8830, "S_2021_22": 39864, "P_2021_22": 7089, "S_2022_23": 14913, "S_2023_24": 35284, "S_2024_25": 75368},
            {"st": "manipur", "S_2020_21": 34540, "P_2020_21": 4661, "S_2021_22": 6424, "P_2021_22": 3064, "S_2022_23": 1146, "S_2023_24": 2879, "S_2024_25": 20798},
            {"st": "meghalaya", "S_2020_21": 17769, "P_2020_21": 1604, "S_2021_22": 3406, "P_2021_22": 4871, "S_2022_23": 1245, "S_2023_24": 2502, "S_2024_25": 7938},
            {"st": "odisha", "S_2020_21": 68828, "P_2020_21": 3704, "S_2021_22": 12645, "P_2021_22": 4211, "S_2022_23": 12116, "S_2023_24": 21457, "S_2024_25": 26231},
            {"st": "punjab", "S_2020_21": 57054, "P_2020_21": 17251, "S_2021_22": 18539, "P_2021_22": 9537, "S_2022_23": 7568, "S_2023_24": 11836, "S_2024_25": 106699},
            {"st": "rajasthan", "S_2020_21": 97822, "P_2020_21": 17189, "S_2021_22": 38511, "P_2021_22": 14328, "S_2022_23": 9232, "S_2023_24": 23564, "S_2024_25": 280156},
            {"st": "tamil nadu", "S_2020_21": 72404, "P_2020_21": 6016, "S_2021_22": 29057, "P_2021_22": 3865, "S_2022_23": 8029, "S_2023_24": 34533, "S_2024_25": 85689},
            {"st": "telangana", "S_2020_21": 33999, "P_2020_21": 6724, "S_2021_22": 13107, "P_2021_22": 4941, "S_2022_23": 8040, "S_2023_24": 15390, "S_2024_25": 22188},
            {"st": "uttar pradesh", "S_2020_21": 239286, "P_2020_21": 29901, "S_2021_22": 69015, "P_2021_22": 17547, "S_2022_23": 25568, "S_2023_24": 71801, "S_2024_25": 463503},
            {"st": "uttarakhand", "S_2020_21": 29412, "P_2020_21": 9026, "S_2021_22": 10522, "P_2021_22": 3949, "S_2022_23": 2942, "S_2023_24": 11669, "S_2024_25": 35364},
            {"st": "west bengal", "S_2020_21": 53221, "P_2020_21": 6946, "S_2021_22": 31406, "P_2021_22": 5333, "S_2022_23": 12370, "S_2023_24": 25768, "S_2024_25": 36410}
          ]
        },
        "key": "st",
        "fields": ["S_2020_21", "P_2020_21", "S_2021_22", "P_2021_22", "S_2022_23", "S_2023_24", "S_2024_25"]
      }
    },
    {"calculate": "met + '_' + yr", "as": "fld"},
    {"calculate": "datum[datum.fld]", "as": "val"}
  ],
  "mark": {"type": "geoshape", "stroke": "white", "strokeWidth": 1},
  "projection": {"type": "mercator"},
  "encoding": {
    "color": {
      "field": "val",
      "type": "quantitative",
      "scale": {"type": "sqrt", "scheme": "blues"},
      "legend": {"title": "Value", "titleFontSize": 12, "orient": "bottom-left"}
    },
    "tooltip": [
      {"field": "properties.name", "type": "nominal", "title": "State"},
      {"field": "val", "type": "quantitative", "title": "Value", "format": ","}
    ]
  }
}